# 唯一真相：管理帳號
mgmt_user: ansible

ansible_become: true

# 若目標帳號需要密碼登入/提權，可把密碼放在 Vault（inventory/vault/bootstrap.yml）
ansible_password: "{{ vault_ansible_password | default(omit) }}"
ansible_become_password: "{{ vault_ansible_become_password | default(omit) }}"

# 預設改用密碼登入（Vault 提供），如要改回金鑰再覆寫
ansible_ssh_private_key_file: ""
ansible_ssh_common_args: "-o PreferredAuthentications=password -o PubkeyAuthentication=no -o PasswordAuthentication=yes -o KbdInteractiveAuthentication=yes -o StrictHostKeyChecking=no"

# （可選）在 bootstrap 時要塞進節點的本機公鑰
mgmt_pubkey_src: "~/.ssh/id_rsa.pub"

# （可選）controller 內部用金鑰型態
mgmt_key_type: rsa
mgmt_key_bits: 4096

# 共享儲存（NFS）預設
nfs_home_export: /export/home
nfs_slurm_export: /export/slurm
nfs_mount_opts: "rw,sync,_netdev"
nfs_server_host: "{{ hostvars[groups['infra'][0]].ansible_host | default(groups['infra'][0]) if (groups['infra'] | default([])) | length > 0 else '' }}"

# Slurm accounting (slurmdbd)
slurm_user_uid: 64030
slurm_user_gid: 64030
slurmdbd_db_user: slurm
slurmdbd_host: "{{ nfs_server_host }}"
slurmdbd_accounting_user: "{{ slurmdbd_db_user | default('') }}"
# Leave empty when using auth/munge with slurmdbd; set only if you intentionally use a password
slurmdbd_accounting_pass: ""

# Slurm GRES AutoDetect mode
slurm_gres_autodetect: "nvml"
